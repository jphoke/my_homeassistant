# Loads default set of integrations. Do not remove.
default_config:


frontend:
  extra_module_url:
    - /local/community/custom-brand-icons/custom-brand-icons.js
  themes: !include_dir_merge_named themes


# Setup the TLS Certs from the DuckDNS Addon
http:
  ssl_certificate: /ssl/fullchain.pem
  ssl_key: /ssl/privkey.pem

shell_command:
    # Turn MagicMirror On and Off via API call
    #bedroom_mirror_off: curl http://192.168.213.96:8080/api/monitor/off
    #bedroom_mirror_on:  curl http://192.168.213.96:8080/api/monitor/on
    #ha_git_push: /homeassistant/ha_gitpush.sh
    push2git: /config/ha_gitpush.sh

# Include other configuration files
automation: !include automations.yaml
script: !include scripts.yaml
scene: !include scenes.yaml
recorder: !include recorder.yaml

template: !include template.yaml
sensor: !include sensor.yaml


# INFLUXDB v2 CONFIGS - Clean slate for analytics only
influxdb:
  api_version: 2
  ssl: false
  host: 192.168.66.29
  port: 8086
  token: !secret influx_key
  organization: !secret influx_org
  bucket: !secret influx_bucket
  tags:
    source: HA
  tags_attributes:
    - friendly_name
  default_measurement: units
  
  # Exclude everything by default, then explicitly include what's valuable
  exclude:
    domains:
      - automation
      - button
      - camera
      - conversation
      - cover
      - device_tracker
      - event
      - fan
      - group
      - input_boolean
      - input_button
      - input_datetime
      - input_number
      - input_select
      - input_text
      - light
      - lock
      - media_player
      - person
      - persistent_notification
      - remote
      - scene
      - script
      - select
      - siren
      - switch
      - text
      - time
      - timer
      - tts
      - update
      - vacuum
      - zone
      
    entity_globs:
      # Infrastructure noise
      - sensor.*_u7_pro_*
      - sensor.usw_*
      - sensor.sussex_*
      - sensor.unifi_*
      - sensor.lxc_*
      - sensor.qemu_*
      - sensor.node_prox01_*
      - binary_sensor.uptimekuma*
      - sensor.uptimekuma*
      
      # ESPHome/device internals
      - sensor.*_rssi
      - sensor.*_uptime
      - sensor.*_esp_temperature
      - sensor.*_linkquality
      - sensor.*_chip_temp
      - sensor.*_sensor_count
      
      # High-frequency motion/occupancy (no analytical value)
      - sensor.*_radar_*
      - binary_sensor.*_radar_*
      - binary_sensor.*_motion
      - binary_sensor.*_occupancy
      - sensor.*_ltr390_*
      
      # WLED device internals
      - sensor.wled_*
      
      # Zigbee2MQTT bridge stats
      - sensor.zigbee2mqtt*
      
      # Thread/Matter internals
      - sensor.*_thread_*
      
      # X1C printer internals
      - sensor.x1c_*
      
      # Integration metadata
      - sensor.duck_dns*
      - sensor.esphome*
      - sensor.govee_to_mqtt*
      - sensor.home_assistant_*
      - sensor.hacs
      
      # Battery spam 
      - binary_sensor.*_battery_low
      
      # iPhone activity/storage noise
      - sensor.*iphone*activity*
      - sensor.*iphone*storage*
      - sensor.*iphone*distance*
      
      # Dryer/washer - no analytical value
      - sensor.dryer_*
      - sensor.washer_*
      - binary_sensor.dryer_*
      - binary_sensor.washer_*
      
      # Synology NAS internals
      - sensor.synology_nas_*uptime
      - sensor.synology_nas_*network*
      - sensor.synology_nas_status*
      - binary_sensor.synology_nas_*
      
      # Frigate/Camera detection spam
      - sensor.frigate_*
      - sensor.reolink_*
      - sensor.*_camera_fps
      - sensor.*_camera_detection_*
      - sensor.*_camera_process_fps
      - sensor.*_camera_skipped_fps
      - binary_sensor.*_camera_*_occupancy
      - binary_sensor.*_detected
      - binary_sensor.*_crying_detected
      - binary_sensor.*_package_*
      - binary_sensor.*_ringing
      - binary_sensor.*_snooze
      
      # Door/window contact sensors
      - binary_sensor.*_entry_*
      - binary_sensor.*_door_*
      - binary_sensor.*_sensor_open
      
      # Device online status
      - binary_sensor.*_online
      
      # Travel time sensors
      - sensor.travel_time_*
      - sensor.waze_*
      
      # Sun/time sensors
      - sensor.sun_*
      - sensor.time
      - sensor.date
      - sensor.date_*
      - sensor.time_*
      
      # Smoke detector status fields (keep alarm_status, drop maintenance)
      - binary_sensor.*_smoke_detector_mute_status
      - binary_sensor.*_smoke_detector_is_life_end
      - binary_sensor.*_is_life_end
      - binary_sensor.*_mute_status
      
      # Statistics/derived sensors
      - sensor.*_statistics_*
      - sensor.*_mean
      - sensor.*_max
      - sensor.*_min
      - sensor.*_median
      
      # Home Assistant core metrics
      - sensor.home_assistant_v2_db*
      - sensor.processor_*
      - sensor.memory_*
      - sensor.disk_*
      - sensor.last_boot
      - sensor.load_*
      
      # Immich photo management
      - sensor.immich_*
      
      # Proximity sensors
      - sensor.proximity_*
      
      # SSL certificate expiry
      - sensor.*_cert_expiry
      - sensor.*_ssl_*
      
      # Apollo multisensor internals (keep environmental data)
      - sensor.*_multisensor_esp_*
      - sensor.*_multisensor_g_*
      - sensor.*_multisensor_acceleration_*
      - sensor.*_multisensor_gyroscope_*
      - sensor.*_multisensor_gravity_*
      - sensor.*_multisensor_magnetometer_*
      
      # Version sensors
      - sensor.*_version
      - sensor.*_latest_version
      
    entities:
      - sensor.mb_c300_data_mode
      - sensor.mb_c300_rcp_features
      - sensor.mb_c300_tires_rdk_state
      - sensor.mb_c300_eco_score_acceleration
      - sensor.mb_c300_eco_score_constant
      - sensor.mb_c300_eco_score_free_wheel
      - sensor.mb_c300_eco_score_bonus_range
      - sensor.mb_c300_distance_zero_emission_reset
      - sensor.mb_c300_distance_zero_emission_start
      - binary_sensor.mb_c300_windows_closed
      - binary_sensor.mb_c300_engine_state
      - binary_sensor.mb_c300_park_brake_status
      - binary_sensor.mb_c300_remote_start_active
      - sensor.office_multisensor_radar_still_energy
      - sensor.office_multisensor_radar_move_energy
      - sensor.basement_multisensor_radar_still_energy
      - sensor.basement_multisensor_radar_move_energy
      - sensor.bedroom_multisensor_radar_still_energy
      - sensor.bedroom_multisensor_radar_move_energy    
      - sensor.bedroom_air_sensor_uptime
      - sensor.sussex_house_part_deux_sussex_house_part_deux_cpu_temperature

      
  # Replace your current include: section with this:

  include:
    entity_globs:
      # Core environmental data
      - sensor.*_temperature
      - sensor.*_humidity
      - sensor.*_co2
      - sensor.*_pressure
      
      # Air quality sensors (all types)
      - sensor.airnow_*
      - sensor.*_air_sensor_*
      - sensor.*_air_purifier_*
      - sensor.*_pm25
      - sensor.*_pm_*
      - sensor.*_voc*
      - sensor.*_nox
      
      # Carbon monoxide (smoke detectors & combination alarms)
      - sensor.*_carbon_monoxide
      
      # Battery monitoring (all devices)
      - sensor.*_battery
      - sensor.*_voltage
      
      # Energy monitoring
      - sensor.*_energy
      - sensor.*_power
      
      # HVAC systems
      - sensor.boldr_*thermostat_*
      - sensor.dining_room_current_*
      
      # Mercedes (all sensors)
      - sensor.mb_c300_*
      - binary_sensor.mb_c300_*
      
      # Synology NAS
      - sensor.synology_nas_drive_*_temperature
      - sensor.synology_nas_m_2_drive_*_temperature
      - sensor.synology_nas_temperature
      - sensor.synology_nas_cpu_utilization_*
      - sensor.synology_nas_memory_*
      - sensor.synology_nas_volume_*
      
      # Weather station
      - sensor.ecowitt_weather_station_*

      # Smoke detector alarm status
      - binary_sensor.*_smoke_detector_alarm_status
      - binary_sensor.combination_alarm_*_alarm_status
      
      # Template sensors for forecast data - 5days and local TZ sunrise/sunset
      - sensor.forecast_day_*
      - sensor.sunrise_local
      - sensor.sunset_local
      - sensor.moon_phase

    entities:
      # Weather integrations
      - weather.pirateweather
    


#Adding to squelch ecowitt error log spam
logger:
  default: info
  filters:
    aioecowitt.server:
      - "Unhandled sensor type gain*"
    custom_components.xsense.mqtt:
      - "Error while re-connecting to XSense MQTT: WebSocket handshake error,*"
#  logs:
#    homeassistant.components.anthropic: debug


